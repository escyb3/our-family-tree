<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>הפורום המשפחתי</title>
  <link rel="stylesheet" href="/styles.css">
  <script defer src="/scripts/forum.js"></script>
</head>
<body>
  <header>
    <h1>📣 הפורום המשפחתי</h1>
    <div id="user-info"></div>
  </header>

  <main>
    <section id="forum-controls">
      <button onclick="openNewThreadForm()">➕ פתח דיון חדש</button>
      <input type="text" id="search-box" placeholder="🔍 חיפוש בפורום" oninput="searchForum()">
      <label><input type="checkbox" onchange="toggleActiveUsers()"> הצג משתמשים פעילים</label>
    </section>

    <section id="new-thread-form" style="display:none;">
      <h2>📝 דיון חדש</h2>
      <input id="thread-title" placeholder="כותרת הדיון">
      <textarea id="thread-content" placeholder="תוכן ההודעה הראשית..."></textarea>
      <input type="text" id="thread-tags" placeholder="תגיות (מופרדות בפסיקים)">
      <input type="file" id="image-upload" accept="image/*" onchange="previewImage()">
      <div id="image-preview"></div>
      <label><input type="checkbox" id="anonymous"> פרסום אנונימי</label>
      <button onclick="submitNewThread()">📤 פרסם</button>
      <button onclick="saveDraft()">💾 שמור טיוטה</button>
    </section>

    <section id="forum-threads">
      <!-- דיונים ייטענו כאן -->
    </section>
  </main>

  <template id="thread-template">
    <article class="thread">
      <h3 class="thread-title"></h3>
      <div class="thread-meta">
        <span class="author"></span> • <span class="timestamp"></span>
        <button onclick="shareThread(this)">📤 שיתוף</button>
        <span class="likes">👍 <span class="like-count">0</span></span>
        <button onclick="voteThread(this, 1)">⬆️</button>
        <button onclick="voteThread(this, -1)">⬇️</button>
        <button onclick="replyToThread(this)">💬 הגב</button>
        <button onclick="markAsSolved(this)">✅ נפתר</button>
      </div>
      <div class="thread-content"></div>
      <div class="thread-tags"></div>
      <div class="thread-attachments"></div>
      <div class="emoji-reactions">❤️ 😄 🤔</div>
      <div class="edit-history-toggle" onclick="toggleHistory(this)">📜 היסטוריית עריכות</div>
      <section class="replies">
        <!-- תגובות -->
      </section>
      <form class="reply-form" style="display:none;" onsubmit="submitReply(event)">
        <textarea class="reply-text" placeholder="כתוב תגובה..."></textarea>
        <input type="file" class="reply-image" accept="image/*">
        <label><input type="checkbox" class="anonymous-reply"> אנונימי</label>
        <button type="submit">📨 שלח</button>
      </form>
    </article>
  </template>

  <template id="reply-template">
    <div class="reply">
      <span class="reply-author"></span>: <span class="reply-content"></span>
      <div class="reply-meta">
        <span class="reply-timestamp"></span>
        <span class="likes">👍 <span class="like-count">0</span></span>
        <button onclick="voteReply(this, 1)">⬆️</button>
        <button onclick="voteReply(this, -1)">⬇️</button>
        <button onclick="startPrivateMessage(this)">📩 הודעה פרטית</button>
        <button onclick="reactEmoji(this)">😊</button>
      </div>
    </div>
  </template>

  <footer>
    <p>🧠 מופעל ע״י AI – מזהה נושאים כפולים, מסווג תגיות, מקשר לאילן יוחסין</p>
    <p>🎯 צבור נקודות על השתתפות, קבל תגמולים!</p>
  </footer>
</body>
</html>
