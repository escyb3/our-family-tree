<html>
  <head>Admin Dashboard-Manage Users (only accessible to SuperAdmins)</head>
  <body>
<form id="new-user-form">
  <input name="username" placeholder="שם משתמש" required>
  <input name="password" type="password" placeholder="סיסמה" required>
  <input name="side" placeholder="צד משפחה (למשל: ben_abou)">
  <select name="role">
    <option value="user">User</option>
    <option value="admin">Admin</option>
  </select>
  <button type="submit">הוסף משתמש</button>
</form>

<script>
document.getElementById("new-user-form").onsubmit = async e => {
  e.preventDefault();
  const form = e.target;
  const body = {
    username: form.username.value,
    password: form.password.value,
    role: form.role.value,
    side: form.side.value
  };
  const res = await fetch("/api/add-user", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(body)
  });
  const data = await res.json();
  if (data.success) alert("✅ נוצר משתמש בהצלחה");
  else alert("❌ שגיאה: " + (data.error || "לא ידוע"));
};
</script>
</body>
</html>
