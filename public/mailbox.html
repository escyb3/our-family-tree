<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>📬 תיבת ההודעות</title>
  <link rel="stylesheet" href="/style.css">
  <style>
    body { font-family: sans-serif; background: #f7f9fc; margin: 0; }
    header { background: #0057a3; color: white; padding: 1rem; font-size: 1.5rem; text-align: center; position: relative; }
    #compose-toggle { position: absolute; left: 1rem; top: 1rem; background: #fff; color: #0057a3; border: none; padding: 0.4rem 1rem; border-radius: 8px; font-weight: bold; cursor: pointer; }
    .container { display: flex; max-width: 1200px; margin: auto; gap: 1rem; padding: 1rem; }
    #inbox-list, #preview-pane { flex: 1; background: white; border-radius: 8px; box-shadow: 0 0 6px rgba(0,0,0,0.1); padding: 1rem; overflow-y: auto; max-height: 80vh; }
    .msg-card { border-bottom: 1px solid #ddd; padding: 0.5rem; cursor: pointer; }
    .msg-card.unread { background: #eef; font-weight: bold; }
    #send-form { display: none; flex-direction: column; gap: 0.5rem; background: #fff; padding: 1rem; border-radius: 8px; box-shadow: 0 0 6px rgba(0,0,0,0.1); margin: 1rem auto; max-width: 700px; }
    #send-form.show { display: flex; }
    input, textarea, select { padding: 0.5rem; font-size: 1rem; width: 100%; border: 1px solid #ccc; border-radius: 6px; }
    button { padding: 0.5rem 1rem; border: none; border-radius: 6px; cursor: pointer; }
    .filters { display: flex; gap: 1rem; margin: 1rem; }
    #autocomplete-box { background: white; border: 1px solid #ccc; position: absolute; z-index: 1000; max-height: 200px; overflow-y: auto; }
    #autocomplete-box div { padding: 5px; cursor: pointer; }
    #autocomplete-box div:hover { background: #eef; }
  </style>
</head>
<body>
  <header>
    תיבת ההודעות שלי
    <button id="compose-toggle">✉️ כתוב הודעה</button>
  </header>

  <div class="filters">
    <input id="search" placeholder="🔎 חפש לפי שולח/נושא">
    <select id="tag-filter">
      <option value="">🗂️ כל הסוגים</option>
      <option value="אישי">אישי</option>
      <option value="משפחתי">משפחתי</option>
      <option value="מנהלי">מנהלי</option>
      <option value="תמיכה">תמיכה</option>
    </select>
    <input id="date-filter" type="date">
    <select id="sort-mode">
      <option value="received">📥 התקבלו</option>
      <option value="sent">📤 נשלחו</option>
    </select>
  </div>

  <div class="container">
    <div id="inbox-list">⏳ טוען הודעות...</div>
    <div id="preview-pane">👁️ בחר הודעה לצפייה</div>
  </div>

  <form id="send-form">
    <h3>✉️ הודעה חדשה</h3>
    <input id="to" placeholder="אל: username@family.local" autocomplete="off">
    <div id="autocomplete-box"></div>
    <input id="subject" placeholder="נושא">
    <textarea id="body" placeholder="תוכן ההודעה" rows="4"></textarea>
    <select id="type">
      <option value="אישי">אישי</option>
      <option value="משפחתי">משפחתי</option>
      <option value="מנהלי">מנהלי</option>
      <option value="תמיכה">תמיכה</option>
    </select>
    <input type="file" id="attachment">
    <input type="datetime-local" id="schedule-at" placeholder="שליחה מתוזמנת (רשות)">
    <button type="submit">📨 שלח</button>
    <button type="button" onclick="saveDraft()">💾 שמור טיוטה</button>
  </form>

  <section class="container">
    <div style="flex: 1">
      <h3>🧠 סיכום אוטומטי</h3>
      <div class="thread-actions">
        <input id="thread-id" placeholder="מזהה הודעה">
        <button onclick="summarizeThread()">סכם עם GPT</button>
      </div>
      <div id="thread-summary"></div>
    </div>

    <div style="flex: 1">
      <h3>📝 טיוטות</h3>
      <div id="drafts-container">...</div>
    </div>
  </section>

  <script src="/js/inbox-ui.js"></script>
  <script src="/js/inbox.js"></script>
  <script src="/js/compose-ui.js"></script>
  <script src="/js/drafts.js"></script>
  <script src="/js/autocomplete.js"></script>
  <script src="/js/forward.js"></script>
  <script src="/js/inbox-ai.js"></script>
  <script src="/js/notifications.js"></script>
</body>
</html>
