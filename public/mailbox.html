<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>דוא"ל פנימי - Family Mail</title>
  <!-- Firebase App -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<!-- Firebase Auth -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  // בדיקת משתמש מחובר
<let currentUser = null;
try {
  const res = await fetch("/api/user");
  <if (res.ok) {
    const user = await res.json();
    currentUser = user;
    if (usernameDisplay) {
      usernameDisplay.textContent = `מחובר כ־${user.username}`;
    }
  } else {
    console.error(`שגיאה בהתחברות: קוד סטטוס ${res.status}`);
    const errorMessage = await res.text();
    console.error(`הודעת שגיאה מהשרת: ${errorMessage}`);
    if (window.location.pathname !== "/login.html") {
      location.href = "/login.html";
    }
  }
} catch (err) {
  console.error("שגיאה בבדיקת התחברות:", err);
  <if (window.location.pathname !== "/login.html") {
    location.href = "/login.html";
  }
}

  <!-- Tailwind CDN (לשמור על אותו עיצוב כמו ב-React) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- אפשרות להגדיר את קונפיגורציית Firebase כמשתנים גלובליים לפני טעינת app.js.
       דוגמה:
  <script>
    window.__firebase_config = '{"apiKey":"...","authDomain":"...","projectId":"..."}';
    window.__app_id = 'my-app-id';
    window.__initial_auth_token = null; // או מחרוזת טוקן אם יש
  </script>
  -->
  <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100">

  <div id="root"></div>

  <!-- app.js כמודול (מייבא את מודולי Firebase מ-CDN) -->
  <script type="module" src="mailinbox.js"></script>
</body>
</html>
