<html> <lang="he" dir="rtl">
<head>
  <div id="user-profile" style="text-align:left; padding: 0.5rem;"></div>

<script>
  fetch("/api/user")
    .then(res => res.json())
    .then(user => {
      if (user.username)
        document.getElementById("user-profile").innerHTML = `
          <span style="font-weight:bold;">${user.username}</span>
          <span style="color:gray;">(${user.role})</span>
          <a href="/logout" style="margin-right:10px; color: red;">×”×ª× ×ª×§</a>
        `;
    });
</script>

  <meta charset="UTF-8" />
  <title>××ª×¨ ×”××©×¤×—×” - Ben Abou, Elharrar ×•×¢×•×“</title>
  <link rel="stylesheet" href="/style.css" />
   <style>
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: #f2f6fc;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #0057a3;
      color: white;
      padding: 1rem;
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
    }
    .menu-bar {
      background: #e9f1fb;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 10px;
      gap: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      border-bottom: 1px solid #ccc;
    }
    .menu-bar a {
      display: flex;
      align-items: center;
      gap: 6px;
      background-color: white;
      color: #003366;
      text-decoration: none;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 0.9rem;
      transition: background 0.3s;
    }
    .menu-bar a:hover {
      background-color: #dceeff;
    }
    .content {
      max-width: 900px;
      margin: 2rem auto;
      padding: 1rem;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
  </style>
</head>
</head>
<body>
  <header>
    <img src="/assets/logo.png" alt="×œ×•×’×• ××©×¤×—×ª×™" class="logo" />
    <h1>×‘×¨×•×›×™× ×”×‘××™× ×œ××ª×¨ ×”××©×¤×—×”</h1>
    <h2>Ben Abou â€¢ Elharrar â€¢ Malca â€¢ ×•×¢×•×“</h2>
  </header>
<h1>ğŸ” ×—×™×¤×•×© ×‘××ª×¨</h1>
  <input type="text" id="search" placeholder="×”×§×œ×“ ×©× ××• ×ª×™××•×¨...">
 <div id="results"></div>
  <header>

  <nav>
    <ul>
       <div class="menu-bar">
      <a href="/">ğŸ  ×¢××•×“ ×¨××©×™</a>
        <a href="about.html"> <span>â„¹ï¸</span> ×¢××•×“ ×”×¢×“×›×•× ×™× (Unavailable currently)</a>
      <a href="/tree.html"> <span>ğŸ§¬</span> ×¢×¥ ×”××©×¤×—×”</a>
      <a href="/chat.html"> <span>ğŸ§‘â€ğŸ’»</span> ×¦'××˜ AI</a>
      <a href="/contact-ways.html"> <span>ğŸ“© </span> ×××¦×¢×™ ×ª×§×©×•×¨×ª ××©×¤×—×ª×™×™×</a>
      <<a href="/gallery.html"> <span>ğŸ–¼ï¸</span> ×’×œ×¨×™×™×ª ×ª××•× ×•×ª</a>
      ><a href="/memorial.html"><span>ğŸ•¯ï¸</span> ×§×™×¨ ×–×™×›×¨×•×Ÿ</a>
      <<a href="/timeline.html"><span>ğŸ—“ï¸</span> ×¦×™×¨ ×–××Ÿ</a>
       <a href="/calendar.html"> <span>ğŸ“†</span> ×œ×•×— ×©× ×”</a>
      <a href="/forum.html"> <span>ğŸ‘ª</span> ×¤×•×¨×•× ××©×¤×—×ª×™</a>
        <a href="/biographies.html"><span>ğŸ“–</span> ×‘×™×•×’×¨×¤×™×•×ª</a>
        <li><a href="/family-stats.html"><span>ğŸ“Š</span> ×¡×˜×˜×™×¡×˜×™×§×•×ª</a>
       <a href="/update-request.html">×¢×“×›×•×Ÿ ×¤×¨×˜×™×</a>
        <a href="/upload-photo.html">×”×¢×œ××ª ×ª××•× ×•×ª</a>
        <a href="/upload-video.html">×”×¢×œ××ª ×¡×¨×˜×•×Ÿ</a>
      <a href="/search-ai.html">×—×™×¤×•×© AI</a>
        <a href="/migration-map.html">××¤×ª × ×“×•×“×™×</a>
     <a href="/newsletter.html"><span>ğŸ“°</span> ×¢×œ×•×Ÿ</a>
        <a href="/login.html"><span>ğŸ”</span> ×›× ×™×¡×ª ××©×ª××©×™×</a>
        <a href="/logout">×”×ª× ×ª×§×•×ª</a>
          </div>
    </ul>
  </nav>
  </header>
   <div style="position: fixed; top: 1rem; left: 1rem; z-index: 1000;">
    <button id="langToggle" class="px-4 py-2 rounded-full bg-blue-500 text-white shadow-md hover:bg-blue-600 transition">
      EN
    </button>
  </div>
  <script>
    const toggleBtn = document.getElementById("langToggle");
    let lang = localStorage.getItem("lang") || "he";

    toggleBtn.textContent = lang === "he" ? "EN" : "HE";

    toggleBtn.addEventListener("click", () => {
      lang = lang === "he" ? "en" : "he";
      localStorage.setItem("lang", lang);
      location.reload();
    });
  </script>
               <select id="langSelector" class="lang-selector">
          <option value="he">HE</option>
          <option value="en">EN</option>
          <option value="yi">YI</option>
          <option value="fr">FR</option>
        </select>
  <main>
    <section>
      <h3>ğŸŒŸ ×‘×¨×•×›×™× ×”×‘××™× ×œ××¨×›×– ×”××©×¤×—×ª×™</h3>
      <p>××ª×¨ ×–×” × ×‘× ×” ×¢×‘×•×¨ ×›×œ ×”××©×¤×—×•×ª: Ben Abou, Elharrar, Malca, Ben David, Bromberg, Barenbaum,Fass-Schneck, Weinberger, Leibner, van der Velde, Behr, de Vries, Italiaander, Izaks, Chapon, ×•×¢×•×“ â€“ ×œ×©×™×ª×•×£ ×ª××•× ×•×ª, ×”× ×¦×—×•×ª, ×¢×¥ ××©×¤×—×”, ×”×•×“×¢×•×ª ×•×¢×•×“.</p>
      <p>× ×™×ª×Ÿ ×œ×”×™×›× ×¡ ×œ×¤×™ ×¦×“ ××©×¤×—×ª×™, ×œ×¢×“×›×Ÿ ×¤×¨×˜×™×, ×œ×©×•×—×— ×¢× ×¦×³××˜ AI ××©×¤×—×ª×™ ×•×œ×—×•×•×ª ×™×—×“ ×”×™×¡×˜×•×¨×™×” ××ª×•×¢×“×ª.</p>
    </section>
      <main>
    <h1>×‘×¨×•×›×™× ×”×‘××™× ×œ×¢×¥ ×”××©×¤×—×” ×©×œ× ×•</h1>
    <ul class="features">
      <li>ğŸŒ³×¢×¥ ××©×¤×—×” ××™× ×˜×¨××§×˜×™×‘×™</li>
      <li>ğŸ” ×›× ×™×¡×ª ××©×ª××©×™× ×•×”×¨×©××•×ª ×œ×¤×™ ×¦×“ ××©×¤×—×ª×™</li>
      <li>ğŸ’¬ ×§×™×¨ ××©×¤×—×ª×™ ×œ×¤×•×¡×˜×™× ×•×ª×’×•×‘×•×ª</li>
      <li>ğŸ“¨ ××¢×¨×›×ª ×”×•×“×¢×•×ª ×¤× ×™××™×ª</li>
      <li>ğŸ–¼ï¸ ×ª×¦×•×’×ª ×’×œ×¨×™×” ×œ××¡××›×™× ×•×ª××•× ×•×ª</li>
      <li>ğŸ•¯ï¸ ×¢××•×“×™ ×”× ×¦×—×” ×¢× × ×¨ ×“×™×’×™×˜×œ×™</li>
      <li>ğŸŒ ×ª×¤×¨×™×˜ ×“×•-×œ×©×•× ×™ (×¢×‘×¨×™×ª/×× ×’×œ×™×ª)</li>
      <li>ğŸ” ×—×™×¤×•×© ×—×›×</li>
      <li>ğŸ“§ ×ª××™×›×” ×‘-× ×™×•×–×œ×˜×¨</li>
      <li>ğŸ¤– ×¦â€™××˜ AI ××©×¤×—×ª×™ ×¢× ×ª××™×›×” ×‘× ×ª×•× ×™ ××©×¤×—×”</li>
      <li>ğŸ“± ×ª××™×›×” ×‘×¢×™×¦×•×‘ ×¨×¡×¤×•× ×¡×™×‘×™ ×œ× ×™×™×“</li>
    </ul>
  </main>
        <section>
            <h2>×—×“×©×•×ª ×•×¢×“×›×•× ×™×</h2>
            <ul>
                <li>×”×•×¡×¤× ×• ×™×›×•×œ×ª ×”×¢×œ××ª ×ª××•× ×•×ª ×œ×¢×¥ ×”××©×¤×—×”.</li>
                <li>× ×¤×ª×—×” ××¢×¨×›×ª ×”×”×•×“×¢×•×ª ×”×¤× ×™××™×ª ×œ×›×œ ×”××©×ª××©×™×.</li>
                <li>× ×™×ª×Ÿ ×œ×”×“×œ×™×§ × ×¨ ×“×™×’×™×˜×œ×™ ×œ×¢×™×œ×•×™ × ×©××ª ×™×§×™×¨×™×›×.</li>
            </ul>
        </section>


    <section class="hero-image">
      <img src="/asset/family-hero.png" alt="×ª××•× ×ª ××©×¤×—×”" />
    </section>

  <footer>
    <p>&copy; 2025 ××ª×¨ ×”××©×¤×—×” â€¢ × ×‘× ×” ×‘××”×‘×” ×¢"×™ ×”××©×¤×—×” â€¢ <a href="/admin.html">ğŸ› ï¸ × ×™×”×•×œ</a></p>
  </footer>
  <script>
    const translations = {
      "he": {
        "title": "××ª×¨ ×”××©×¤×—×” - Ben Abou, Elharrar ×•×¢×•×“",
        "logout-link": "×”×ª× ×ª×§",
        "login-link": "×›× ×™×¡×”",
        "welcome-title": "×‘×¨×•×›×™× ×”×‘××™× ×œ××ª×¨ ×”××©×¤×—×”",
        "family-names": "Ben Abou â€¢ Elharrar â€¢ Malca",
        "search-title": "ğŸ” ×—×™×¤×•×© ×‘××ª×¨",
        "search-placeholder": "×”×§×œ×“ ×©× ××• ×ª×™××•×¨...",
        "menu-home": "ğŸ  ×¢××•×“ ×¨××©×™",
        "menu-about": "<span>â„¹ï¸</span> ×¢××•×“ ×”×¢×“×›×•× ×™× (Unavailable currently)",
        "menu-tree": "<span>ğŸ§¬</span> ×¢×¥ ×”××©×¤×—×”",
        "menu-chat": "<span>ğŸ§‘â€ğŸ’»</span> ×¦'××˜ AI",
        "menu-contact": "<span>ğŸ“© </span> ×××¦×¢×™ ×ª×§×©×•×¨×ª ××©×¤×—×ª×™×™×",
        "menu-gallery": "<span>ğŸ–¼ï¸</span> ×’×œ×¨×™×™×ª ×ª××•× ×•×ª",
        "menu-memorial": "<span>ğŸ•¯ï¸</span> ×§×™×¨ ×–×™×›×¨×•×Ÿ",
        "menu-timeline": "<span>ğŸ—“ï¸</span> ×¦×™×¨ ×–××Ÿ",
        "menu-calendar": "<span>ğŸ“†</span> ×œ×•×— ×©× ×”",
        "menu-forum": "<span>ğŸ‘ª</span> ×¤×•×¨×•× ××©×¤×—×ª×™",
        "menu-biographies": "<span>ğŸ“–</span> ×‘×™×•×’×¨×¤×™×•×ª",
        "menu-stats": "<span>ğŸ“Š</span> ×¡×˜×˜×™×¡×˜×™×§×•×ª",
        "menu-update": "×¢×“×›×•×Ÿ ×¤×¨×˜×™×",
        "menu-upload-photo": "×”×¢×œ××ª ×ª××•× ×•×ª",
        "menu-upload-video": "×”×¢×œ××ª ×¡×¨×˜×•×Ÿ",
        "menu-search-ai": "×—×™×¤×•×© AI",
        "menu-migration-map": "××¤×ª × ×“×•×“×™×",
        "menu-newsletter": "<span>ğŸ“°</span> ×¢×œ×•×Ÿ",
        "main-welcome-heading": "ğŸŒŸ ×‘×¨×•×›×™× ×”×‘××™× ×œ××¨×›×– ×”××©×¤×—×ª×™",
        "main-welcome-text": "××ª×¨ ×–×” × ×‘× ×” ×¢×‘×•×¨ ×›×œ ×”××©×¤×—×•×ª: Ben Abou, Elharrar, Malca, Ben David, Bromberg, Barenbaum, Fass-Schneck, Weinberger, Leibner, van der Velde, Behr, de Vries, Italiaander, Izaks, Chapon, ×•×¢×•×“ â€“ ×œ×©×™×ª×•×£ ×ª××•× ×•×ª, ×”× ×¦×—×•×ª, ×¢×¥ ××©×¤×—×”, ×”×•×“×¢×•×ª ×•×¢×•×“.",
        "main-welcome-subtext": "× ×™×ª×Ÿ ×œ×”×™×›× ×¡ ×œ×¤×™ ×¦×“ ××©×¤×—×ª×™, ×œ×¢×“×›×Ÿ ×¤×¨×˜×™×, ×œ×©×•×—×— ×¢× ×¦'××˜ AI ××©×¤×—×ª×™ ×•×œ×—×•×•×ª ×™×—×“ ×”×™×¡×˜×•×¨×™×” ××ª×•×¢×“×ª.",
        "tree-welcome-title": "×‘×¨×•×›×™× ×”×‘××™× ×œ×¢×¥ ×”××©×¤×—×” ×©×œ× ×•",
        "feature-tree": "ğŸŒ³×¢×¥ ××©×¤×—×” ××™× ×˜×¨××§×˜×™×‘×™",
        "feature-login": "ğŸ” ×›× ×™×¡×ª ××©×ª××©×™× ×•×”×¨×©××•×ª ×œ×¤×™ ×¦×“ ××©×¤×—×ª×™",
        "feature-wall": "ï¿½ ×§×™×¨ ××©×¤×—×ª×™ ×œ×¤×•×¡×˜×™× ×•×ª×’×•×‘×•×ª",
        "feature-messages": "ğŸ“¨ ××¢×¨×›×ª ×”×•×“×¢×•×ª ×¤× ×™××™×ª",
        "feature-gallery": "ğŸ–¼ï¸ ×ª×¦×•×’×ª ×’×œ×¨×™×” ×œ××¡××›×™× ×•×ª××•× ×•×ª",
        "feature-memorial": "ğŸ•¯ï¸ ×¢××•×“×™ ×”× ×¦×—×” ×¢× × ×¨ ×“×™×’×™×˜×œ×™",
        "feature-multilingual": "ğŸŒ ×ª×¤×¨×™×˜ ×“×•-×œ×©×•× ×™ (×¢×‘×¨×™×ª/×× ×’×œ×™×ª)",
        "feature-search": "ğŸ” ×—×™×¤×•×© ×—×›×",
        "feature-newsletter": "ğŸ“§ ×ª××™×›×” ×‘-× ×™×•×–×œ×˜×¨",
        "feature-ai": "ğŸ¤– ×¦'××˜ AI ××©×¤×—×ª×™ ×¢× ×ª××™×›×” ×‘× ×ª×•× ×™ ××©×¤×—×”",
        "feature-responsive": "ğŸ“± ×ª××™×›×” ×‘×¢×™×¦×•×‘ ×¨×¡×¤×•× ×¡×™×‘×™ ×œ× ×™×™×“",
        "news-updates-heading": "×—×“×©×•×ª ×•×¢×“×›×•× ×™×",
        "news-1": "×”×•×¡×¤× ×• ×™×›×•×œ×ª ×”×¢×œ××ª ×ª××•× ×•×ª ×œ×¢×¥ ×”××©×¤×—×”.",
        "news-2": "× ×¤×ª×—×” ××¢×¨×›×ª ×”×”×•×“×¢×•×ª ×”×¤× ×™××™×ª ×œ×›×œ ×”××©×ª××©×™×.",
        "news-3": "× ×™×ª×Ÿ ×œ×”×“×œ×™×§ × ×¨ ×“×™×’×™×˜×œ×™ ×œ×¢×™×œ×•×™ × ×©××ª ×™×§×™×¨×™×›×.",
        "footer-text": "&copy; 2025 ××ª×¨ ×”××©×¤×—×” â€¢ × ×‘× ×” ×‘××”×‘×” ×¢\"×™ ×”××©×¤×—×” â€¢ <a href=\"/admin.html\" id=\"admin-link\">ğŸ› ï¸ × ×™×”×•×œ</a>",
        "alt-family-logo": "×œ×•×’×• ××©×¤×—×ª×™",
        "alt-family-photo": "×ª××•× ×ª ××©×¤×—×”",
        "unavailable-message": "(Unavailable currently)"
      },
      "en": {
        "title": "The Family Website - Ben Abou, Elharrar and more",
        "logout-link": "Logout",
        "login-link": "Login",
        "welcome-title": "Welcome to the Family Website",
        "family-names": "Ben Abou â€¢ Elharrar â€¢ Malca",
        "search-title": "ğŸ” Search the site",
        "search-placeholder": "Type a name or description...",
        "menu-home": "ğŸ  Home Page",
        "menu-about": "<span>â„¹ï¸</span> Updates Page (Unavailable currently)",
        "menu-tree": "<span>ğŸ§¬</span> Family Tree",
        "menu-chat": "<span>ğŸ§‘â€ğŸ’»</span> AI Chat",
        "menu-contact": "<span>ğŸ“© </span> Family Communications",
        "menu-gallery": "<span>ğŸ–¼ï¸</span> Photo Gallery",
        "menu-memorial": "<span>ğŸ•¯ï¸</span> Memorial Wall",
        "menu-timeline": "<span>ğŸ—“ï¸</span> Timeline",
        "menu-calendar": "<span>ğŸ“†</span> Calendar",
        "menu-forum": "<span>ğŸ‘ª</span> Family Forum",
        "menu-biographies": "<span>ğŸ“–</span> Biographies",
        "menu-stats": "<span>ğŸ“Š</span> Statistics",
        "menu-update": "Update Details",
        "menu-upload-photo": "Upload Photos",
        "menu-upload-video": "Upload Video",
        "menu-search-ai": "AI Search",
        "menu-migration-map": "Migration Map",
        "menu-newsletter": "<span>ğŸ“°</span> Newsletter",
        "main-welcome-heading": "ğŸŒŸ Welcome to the Family Center",
        "main-welcome-text": "This website was built for all families: Ben Abou, Elharrar, Malca, Ben David, Bromberg, Barenbaum, Fass-Schneck, Weinberger, Leibner, van der Velde, Behr, de Vries, Italiaander, Izaks, Chapon, and more â€“ to share photos, memorials, family tree, messages, and more.",
        "main-welcome-subtext": "You can log in by family branch, update details, chat with a family AI, and together experience a documented history.",
        "tree-welcome-title": "Welcome to Our Family Tree",
        "feature-tree": "ğŸŒ³ Interactive Family Tree",
        "feature-login": "ğŸ” User Login and Permissions by Family Branch",
        "feature-wall": "ğŸ’¬ Family Wall for Posts and Comments",
        "feature-messages": "ğŸ“¨ Internal Messaging System",
        "feature-gallery": "ğŸ–¼ï¸ Gallery Display for Documents and Photos",
        "feature-memorial": "ğŸ•¯ï¸ Memorial Pages with a Digital Candle",
        "feature-multilingual": "ğŸŒ Multilingual Menu (Hebrew/English)",
        "feature-search": "ğŸ” Smart Search",
        "feature-newsletter": "ğŸ“§ Newsletter Support",
        "feature-ai": "ğŸ¤– Family AI Chat with Family Data Support",
        "feature-responsive": "ğŸ“± Responsive Design for Mobile",
        "news-updates-heading": "News and Updates",
        "news-1": "We have added the ability to upload photos to the family tree.",
        "news-2": "The internal messaging system is now open to all users.",
        "news-3": "You can now light a digital candle in memory of your loved ones.",
        "footer-text": "&copy; 2025 The Family Website â€¢ Built with love by the family â€¢ <a href=\"/admin.html\" id=\"admin-link\">ğŸ› ï¸ Admin</a>",
        "alt-family-logo": "Family logo",
        "alt-family-photo": "Family photo",
        "unavailable-message": "(Currently Unavailable)"
      },
      "yi": {
        "title": "×“×™ ××©×¤Ö¼×—×” ×•×•×¢×‘×–×™×™×˜×œ - ×‘×Ÿ ××‘Ö¼×•, ×¢×œ×”×¨×¨ ××•×Ÿ ××¢×¨",
        "logout-link": "×Ö·×¨×•×™×¡×’×™×™×Ÿ",
        "login-link": "×Ö·×¨×™×™Ö·× ×’×Ö·× ×’",
        "welcome-title": "×‘×¨×•×›×™× ×”×‘××™× ×¦×• ×“×¢×¨ ××©×¤Ö¼×—×” ×•×•×¢×‘×–×™×™×˜×œ",
        "family-names": "×‘×Ÿ ××‘Ö¼×• â€¢ ×¢×œ×”×¨×¨ â€¢ ××Ö·×œ×§×Ö·",
        "search-title": "ğŸ” ×–×•×›×¢×Ÿ ××•×™×£ ×“×¢×¨ ×•×•×¢×‘×–×™×™×˜×œ",
        "search-placeholder": "×©×¨×™×™×‘×˜ ×Ö· × ×Ö¸××¢×Ÿ ×Ö¸×“×¢×¨ ×‘×Ö·×©×¨×™×™Ö·×‘×•× ×’...",
        "menu-home": "ğŸ  ×”×•×™×¤Ö¼×˜ ×‘×œ×Ö·×˜",
        "menu-about": "<span>â„¹ï¸</span> ×Ö·×¨×™×™Ö·× ×¤×™×¨ ×‘×œ×Ö·×˜ (× ×™×©×˜ ×‘× ×™××¦× ×›×¨×’×¢)",
        "menu-tree": "<span>ğŸ§¬</span> ××©×¤Ö¼×—×” ×‘×•×™×",
        "menu-chat": "<span>ğŸ§‘â€ğŸ’»</span> ×Ö·×™-×˜×©×Ö·×˜",
        "menu-contact": "<span>ğŸ“© </span> ××©×¤Ö¼×—×” ×§×Ö¸××•× ×™×§×Ö·×¦×™×¢×¡",
        "menu-gallery": "<span>ğŸ–¼ï¸</span> ×¤×Ö¸×˜×Ö¸ ×’×Ö·×œ×¢×¨×™×¢",
        "menu-memorial": "<span>ğŸ•¯ï¸</span> ×–×›Ö¼×¨×•×Ÿ ×•×•×Ö·× ×˜",
        "menu-timeline": "<span>ğŸ—“ï¸</span> ×¦×™×™×˜ ×œ×™× ×™×¢",
        "menu-calendar": "<span>ğŸ“†</span> ×œ×•×—",
        "menu-forum": "<span>ğŸ‘ª</span> ××©×¤Ö¼×—×” ×¤×Ö¸×¨×•×",
        "menu-biographies": "<span>ğŸ“–</span> ×‘×™×Ö¸×’×¨×Ö·×¤Ö¿×™×¢×¡",
        "menu-stats": "<span>ğŸ“Š</span> ×¡×˜×Ö·×˜×™×¡×˜×™×§×Ÿ",
        "menu-update": "×“×¢×¨×”×™×™Ö·× ×˜×™×§×Ÿ ×“×¢×˜×Ö·×œ×Ÿ",
        "menu-upload-photo": "×”×™×™×‘×Ÿ ×Ö·×¨×•×™×£ ×¤×Ö¸×˜×Ö¸×¡",
        "menu-upload-video": "×”×™×™×‘×Ÿ ×Ö·×¨×•×™×£ ×•×•×™×“×¢×Ö¸",
        "menu-search-ai": "×–×•×›×¢×Ÿ ××™×˜ ×Ö·×™",
        "menu-migration-map": "××Ö·×¤Ö¼×¢ ×¤Ö¿×•×Ÿ × ×“×•×“×™×",
        "menu-newsletter": "<span>ğŸ“°</span> × ×™×™Ö·×¢×¡×œ×¢×˜×¢×¨",
        "main-welcome-heading": "ğŸŒŸ ×‘×¨×•×›×™× ×”×‘××™× ×¦×•× ××©×¤Ö¼×—×” ×¦×¢× ×˜×¢×¨",
        "main-welcome-text": "×“×™ ×“×Ö¸×–×™×§×¢ ×•×•×¢×‘×–×™×™×˜×œ ××™×– ×’×¢×‘×•×™×˜ ×’×¢×•×•×Ö¸×¨×Ÿ ×¤Ö¿×Ö·×¨ ×Ö·×œ×¢ ××©×¤Ö¼×—×•×ª: ×‘×Ÿ ××‘Ö¼×•, ×¢×œ×”×¨×¨, ××Ö·×œ×§×Ö·, ×‘×Ÿ ×“×•×“, ×‘×¨×Ö¸××‘×¢×¨×’, ×‘×Ö·×¨×¢× ×‘×Ö·×•×, ×¤Ö¿×Ö·×¡-×©× ×¢×§, ×•×•×™×™Ö·× ×‘×¢×¨×’×¢×¨, ×œ×™×™×‘× ×¢×¨, ×¤Ö¿×Ö·×Ÿ ×“×¢×¨ ×•×•×¢×œ×“×¢, ×‘×¢×¨, ×“×¢ ×¤Ö¿×¨×™×¡, ××™×˜×Ö·×œ×™×Ö·× ×“×¢×¨, ×™×–×Ö·×§×¡, ×˜×©×Ö·×¤Ö¼×Ö¸×Ÿ, ××•×Ÿ ××¢×¨ â€“ ×¦×• ×˜×™×™×œ×Ÿ ×‘×™×œ×“×¢×¨, ×–×›×¨×•× ×•×ª, ××©×¤Ö¼×—×” ×‘×•×™×, ××¢×œ×“×•× ×’×¢×Ÿ, ××•×Ÿ ××¢×¨.",
        "main-welcome-subtext": "××™×¨ ×§×¢× ×˜ ×Ö·×¨×™×™Ö·× ×§×•××¢×Ÿ ×“×•×¨×š ××©×¤Ö¼×—×” ×¦×•×•×™×™Ö·×’, ×“×¢×¨×”×™×™Ö·× ×˜×™×§×Ÿ ×“×¢×˜×Ö·×œ×Ÿ, ×¨×¢×“×Ÿ ××™×˜ ×Ö· ××©×¤Ö¼×—×” ×Ö·×™-×˜×©×Ö·×˜ ××•×Ÿ ×¦×•×–×Ö·××¢×Ÿ ××™×‘×¢×¨×œ×¢×‘×Ÿ ×Ö· ×“×Ö¸×§×•××¢× ×˜×™×¨×˜×¢ ×’×¢×©×™×›×˜×¢.",
        "tree-welcome-title": "×‘×¨×•×›×™× ×”×‘××™× ×¦×• ××•× ×“×–×¢×¨ ××©×¤Ö¼×—×” ×‘×•×™×",
        "feature-tree": "ğŸŒ³ ××™× ×˜×¢×¨×Ö·×§×˜×™×•×•×¢×¨ ××©×¤Ö¼×—×” ×‘×•×™×",
        "feature-login": "ğŸ” ×‘×Ö·× ×™×¦×¢×¨ ×Ö·×¨×™×™Ö·× ×’×Ö·× ×’ ××•×Ÿ ×¤Ö¼×¢×¨××™×¡×™×¢×¡ ×œ×•×™×˜ ××©×¤Ö¼×—×” ×¦×•×•×™×™Ö·×’",
        "feature-wall": "ğŸ’¬ ××©×¤Ö¼×—×” ×•×•×Ö·× ×˜ ×¤Ö¿×Ö·×¨ ×¤Ö¼×Ö¸×¡×˜×Ÿ ××•×Ÿ ×§×Ö¸××¢× ×˜×Ö·×¨×Ÿ",
        "feature-messages": "ğŸ“¨ ××™× ×¢×¨×œ×¢×›×¢ ××¢×œ×“×•× ×’ ×¡×™×¡×˜×¢×",
        "feature-gallery": "ğŸ–¼ï¸ ×’×Ö·×œ×¢×¨×™×¢ ×¤Ö¿×Ö·×¨ ×“×Ö¸×§×•××¢× ×˜×Ÿ ××•×Ÿ ×‘×™×œ×“×¢×¨",
        "feature-memorial": "ğŸ•¯ï¸ ×–×›Ö¼×¨×•×Ÿ ×–×™×™×˜×Ÿ ××™×˜ ×Ö· ×“×™×’×™×˜×Ö·×œ×¢ ×œ×™×›×˜",
        "feature-multilingual": "ğŸŒ ××¢×¨-×©×¤Ö¼×¨×Ö·×›×™×§×¢ ××¢× ×™×• (×”×¢×‘×¨×¢×™Ö´×©/×¢× ×’×œ×™×©)",
        "feature-search": "ğŸ” ×§×œ×•×’×¢ ×–×•×›×•× ×’",
        "feature-newsletter": "ğŸ“§ × ×™×™Ö·×¢×¡×œ×¢×˜×¢×¨ ×©×˜×™×¦×¢",
        "feature-ai": "ğŸ¤– ××©×¤Ö¼×—×” ×Ö·×™ ×˜×©×Ö·×˜ ××™×˜ ×©×˜×™×¦×¢ ×¤Ö¿×•×Ÿ ××©×¤Ö¼×—×” ×“×Ö·×˜×Ÿ",
        "feature-responsive": "ğŸ“± ×¨×¢×¡×¤Ö¼×Ö¸× ×¡×™×•×•×¢ ×“×¢×–×™×™×Ÿ ×¤Ö¿×Ö·×¨ ××Ö¸×‘×™×œ",
        "news-updates-heading": "× ×™×™Ö·×¢×¡ ××•×Ÿ ×“×¢×¨×”×™×™Ö·× ×˜×™×§×•× ×’×¢×Ÿ",
        "news-1": "××™×¨ ×”×Ö¸×‘×Ÿ ×¦×•×’×¢×’×¢×‘×Ÿ ×“×™ ××¢×’×œ×¢×›×§×™×™×˜ ×¦×• ×”×™×™×‘×Ÿ ×Ö·×¨×•×™×£ ×‘×™×œ×“×¢×¨ ×¦×•× ××©×¤Ö¼×—×” ×‘×•×™×.",
        "news-2": "×“×™ ××™× ×¢×¨×œ×¢×›×¢ ××¢×œ×“×•× ×’ ×¡×™×¡×˜×¢× ××™×– ××™×¦×˜ ×Ö¸×¤Ö¿×Ÿ ×¤Ö¿×Ö·×¨ ×Ö·×œ×¢ ×‘×Ö·× ×™×¦×¢×¨.",
        "news-3": "××™×¨ ×§×¢× ×˜ ××™×¦×˜ ×¦×™× ×“×Ÿ ×Ö· ×“×™×’×™×˜×Ö·×œ×¢ ×œ×™×›×˜ ×œ×–×›×•×ª × ×©××ª ××™×™×¢×¨×¢ ×œ×™×‘ ×’×¢×”×Ö·×˜×¢.",
        "footer-text": "&copy; 2025 ×“×™ ××©×¤Ö¼×—×” ×•×•×¢×‘×–×™×™×˜×œ â€¢ ×’×¢×‘×•×™×˜ ××™×˜ ×œ×™×‘×©×Ö·×¤Ö¿×˜ ×“×•×¨×š ×“×¢×¨ ××©×¤Ö¼×—×” â€¢ <a href=\"/admin.html\" id=\"admin-link\">ğŸ› ï¸ ×¤Ö¿×Ö·×¨×•×•×Ö·×œ×˜×•× ×’</a>",
        "alt-family-logo": "××©×¤Ö¼×—×” ×œ×Ö¸×’×Ö¸",
        "alt-family-photo": "××©×¤Ö¼×—×” ×¤×Ö¸×˜×Ö¸",
        "unavailable-message": "(× ×™×©×˜ ×‘× ×™××¦× ×›×¨×’×¢)"
      },
      "fr": {
        "title": "Le site familial - Ben Abou, Elharrar et plus",
        "logout-link": "DÃ©connexion",
        "login-link": "Connexion",
        "welcome-title": "Bienvenue sur le site de la famille",
        "family-names": "Ben Abou â€¢ Elharrar â€¢ Malca",
        "search-title": "ğŸ” Rechercher sur le site",
        "search-placeholder": "Tapez un nom ou une description...",
        "menu-home": "ğŸ  Page d'accueil",
        "menu-about": "<span>â„¹ï¸</span> Page d'actualitÃ©s (Actuellement indisponible)",
        "menu-tree": "<span>ğŸ§¬</span> Arbre gÃ©nÃ©alogique",
        "menu-chat": "<span>ğŸ§‘â€ğŸ’»</span> Chat IA",
        "menu-contact": "<span>ğŸ“© </span> Communications familiales",
        "menu-gallery": "<span>ğŸ–¼ï¸</span> Galerie de photos",
        "menu-memorial": "<span>ğŸ•¯ï¸</span> Mur du souvenir",
        "menu-timeline": "<span>ğŸ—“ï¸</span> Ligne du temps",
        "menu-calendar": "<span>ğŸ“†</span> Calendrier",
        "menu-forum": "<span>ğŸ‘ª</span> Forum familial",
        "menu-biographies": "<span>ğŸ“–</span> Biographies",
        "menu-stats": "<span>ğŸ“Š</span> Statistiques",
        "menu-update": "Mettre Ã  jour les dÃ©tails",
        "menu-upload-photo": "TÃ©lÃ©charger des photos",
        "menu-upload-video": "TÃ©lÃ©charger une vidÃ©o",
        "menu-search-ai": "Recherche IA",
        "menu-migration-map": "Carte de migration",
        "menu-newsletter": "<span>ğŸ“°</span> Bulletin d'information",
        "main-welcome-heading": "ğŸŒŸ Bienvenue au centre familial",
        "main-welcome-text": "Ce site web a Ã©tÃ© construit pour toutes les familles : Ben Abou, Elharrar, Malca, Ben David, Bromberg, Barenbaum, Fass-Schneck, Weinberger, Leibner, van der Velde, Behr, de Vries, Italiaander, Izaks, Chapon, et plus encore â€“ pour partager des photos, des souvenirs, l'arbre gÃ©nÃ©alogique, des messages, et plus encore.",
        "main-welcome-subtext": "Vous pouvez vous connecter par branche familiale, mettre Ã  jour les dÃ©tails, discuter avec une IA familiale et dÃ©couvrir ensemble une histoire documentÃ©e.",
        "tree-welcome-title": "Bienvenue dans notre arbre gÃ©nÃ©alogique",
        "feature-tree": "ğŸŒ³ Arbre gÃ©nÃ©alogique interactif",
        "feature-login": "ğŸ” Connexion utilisateur et autorisations par branche familiale",
        "feature-wall": "ğŸ’¬ Mur familial pour les publications et les commentaires",
        "feature-messages": "ğŸ“¨ SystÃ¨me de messagerie interne",
        "feature-gallery": "ğŸ–¼ï¸ Galerie pour les documents et les photos",
        "feature-memorial": "ğŸ•¯ï¸ Pages de mÃ©morial avec une bougie numÃ©rique",
        "feature-multilingual": "ğŸŒ Menu multilingue (hÃ©breu/anglais)",
        "feature-search": "ğŸ” Recherche intelligente",
        "feature-newsletter": "ğŸ“§ Support du bulletin d'information",
        "feature-ai": "ğŸ¤– Chat IA familial avec support des donnÃ©es familiales",
        "feature-responsive": "ğŸ“± Conception rÃ©active pour mobile",
        "news-updates-heading": "Nouvelles et mises Ã  jour",
        "news-1": "Nous avons ajoutÃ© la possibilitÃ© de tÃ©lÃ©charger des photos sur l'arbre gÃ©nÃ©alogique.",
        "news-2": "Le systÃ¨me de messagerie interne est maintenant ouvert Ã  tous les utilisateurs.",
        "news-3": "Vous pouvez maintenant allumer une bougie numÃ©rique en mÃ©moire de vos proches.",
        "footer-text": "&copy; 2025 Le site familial â€¢ Construit avec amour par la famille â€¢ <a href=\"/admin.html\" id=\"admin-link\">ğŸ› ï¸ Administration</a>",
        "alt-family-logo": "Logo de la famille",
        "alt-family-photo": "Photo de la famille",
        "unavailable-message": "(Actuellement indisponible)"
      }
    };

    const langSelector = document.getElementById("langSelector");
    let currentLang = localStorage.getItem("lang") || "he";
    
    // Declare isLoggedIn in a scope accessible by both fetch and the event listener
    let isLoggedIn = false;

    // Function to set the page content based on the selected language
    function setLanguage(lang) {
      const texts = translations[lang];
      if (!texts) return;

      document.title = texts["title"];
      document.getElementById("welcome-title").textContent = texts["welcome-title"];
      document.getElementById("family-names").textContent = texts["family-names"];
      document.getElementById("search-title").textContent = texts["search-title"];
      document.getElementById("search").placeholder = texts["search-placeholder"];

      // Update main content
      document.getElementById("main-welcome-heading").textContent = texts["main-welcome-heading"];
      document.getElementById("main-welcome-text").textContent = texts["main-welcome-text"];
      document.getElementById("main-welcome-subtext").textContent = texts["main-welcome-subtext"];
      document.getElementById("tree-welcome-title").textContent = texts["tree-welcome-title"];
      document.getElementById("feature-tree").textContent = texts["feature-tree"];
      document.getElementById("feature-login").textContent = texts["feature-login"];
      document.getElementById("feature-wall").textContent = texts["feature-wall"];
      document.getElementById("feature-messages").textContent = texts["feature-messages"];
      document.getElementById("feature-gallery").textContent = texts["feature-gallery"];
      document.getElementById("feature-memorial").textContent = texts["feature-memorial"];
      document.getElementById("feature-multilingual").textContent = texts["feature-multilingual"];
      document.getElementById("feature-search").textContent = texts["feature-search"];
      document.getElementById("feature-newsletter").textContent = texts["feature-newsletter"];
      document.getElementById("feature-ai").textContent = texts["feature-ai"];
      document.getElementById("feature-responsive").textContent = texts["feature-responsive"];
      
      // Update news section
      document.getElementById("news-updates-heading").textContent = texts["news-updates-heading"];
      document.getElementById("news-1").textContent = texts["news-1"];
      document.getElementById("news-2").textContent = texts["news-2"];
      document.getElementById("news-3").textContent = texts["news-3"];

      // Update footer and images
      document.getElementById("footer-text").innerHTML = texts["footer-text"];
      document.querySelector('img[alt="×œ×•×’×• ××©×¤×—×ª×™"]').setAttribute('alt', texts["alt-family-logo"]);
      document.querySelector('img[alt="×ª××•× ×ª ××©×¤×—×”"]').setAttribute('alt', texts["alt-family-photo"]);
      
      // Set text direction and language attribute
      const isRtl = lang === "he" || lang === "yi";
      document.documentElement.setAttribute("dir", isRtl ? "rtl" : "ltr");
      document.documentElement.lang = lang;
      
      // Update login/logout link text based on the global isLoggedIn variable
      const loginLogoutLink = document.getElementById("login-logout-link");
      if (loginLogoutLink) {
          loginLogoutLink.textContent = translations[lang][isLoggedIn ? "logout-link" : "login-link"];
      }

      // Update menu links
      document.getElementById("menu-home").innerHTML = texts["menu-home"];
      document.getElementById("menu-about").innerHTML = texts["menu-about"];
      document.getElementById("menu-tree").innerHTML = texts["menu-tree"];
      document.getElementById("menu-chat").innerHTML = texts["menu-chat"];
      document.getElementById("menu-contact").innerHTML = texts["menu-contact"];
      document.getElementById("menu-gallery").innerHTML = texts["menu-gallery"];
      document.getElementById("menu-memorial").innerHTML = texts["menu-memorial"];
      document.getElementById("menu-timeline").innerHTML = texts["menu-timeline"];
      document.getElementById("menu-calendar").innerHTML = texts["menu-calendar"];
      document.getElementById("menu-forum").innerHTML = texts["menu-forum"];
      document.getElementById("menu-biographies").innerHTML = texts["biographies"];
      document.getElementById("menu-stats").innerHTML = texts["menu-stats"];
      document.getElementById("menu-update").innerHTML = texts["menu-update"];
      document.getElementById("menu-upload-photo").innerHTML = texts["menu-upload-photo"];
      document.getElementById("menu-upload-video").innerHTML = texts["menu-upload-video"];
      document.getElementById("menu-search-ai").innerHTML = texts["menu-search-ai"];
      document.getElementById("menu-migration-map").innerHTML = texts["menu-migration-map"];
      document.getElementById("menu-newsletter").innerHTML = texts["menu-newsletter"];
    }

    const menuBar = document.getElementById("menu-bar");
    const userProfile = document.getElementById("user-profile");
    
    fetch("/api/user")
      .then(res => {
        if (res.ok) {
          return res.json();
        } else {
          // User is not logged in, return an empty object
          return {};
        }
      })
      .then(user => {
        isLoggedIn = user && user.username;
        const currentTexts = translations[currentLang];

        // Build the user profile HTML string with the correct link text
        if (isLoggedIn) {
          userProfile.innerHTML = `
            <span style="font-weight:bold;">${user.username}</span>
            <span style="color:gray;">(${user.role})</span>
            <a href="/logout" id="login-logout-link" style="color: white; margin-right:10px;">${currentTexts["logout-link"]}</a>
          `;
        } else {
           userProfile.innerHTML = `
            <a href="/login.html" id="login-logout-link" style="color: white; margin-right:10px;">${currentTexts["login-link"]}</a>
           `;
        }

        // Show/hide menu based on login status
        menuBar.style.display = isLoggedIn ? "flex" : "none";
        
        // Update content based on initial language
        setLanguage(currentLang);
      })
      .catch(error => {
        console.error("Error fetching user data:", error);
        // In case of an error, assume user is not logged in
        isLoggedIn = false;
        const currentTexts = translations[currentLang];
        userProfile.innerHTML = `
          <a href="/login.html" id="login-logout-link" style="color: white; margin-right:10px;">${currentTexts["login-link"]}</a>
        `;
        menuBar.style.display = "none";
        setLanguage(currentLang);
      });

    // Add event listener for language changes
    langSelector.addEventListener("change", (event) => {
      const newLang = event.target.value;
      localStorage.setItem("lang", newLang);
      setLanguage(newLang);
    });
  </script>
</body>
</html>

